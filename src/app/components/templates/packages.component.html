<div>
  <p style="color: gray; padding-bottom: 20px; font-style: italic">{{registryDescription()}}</p>
  <form class="wrap">

    <div class="dlt-form-item dlt-search dlt-search--async dlt-search--open" style="width: 95%; margin-left: 30px; margin-right: 60px">
      <div class="dlt-form-group">
        <form role="search" style="width: 100%;">
          <label for="header-search" class="visually-hidden">
            <span>Filter packages</span>
          </label>
          <input type="text" id="header-search" required class="dlt-text-input dlt-text-search" placeholder="Filter by package name or tags"  [(ngModel)]="searchTerm" [ngModelOptions]="{standalone: true}" (input)="search($event.target.value)" />
          <button class="clear-icon" type="button">
            <i class="dlt-icon-close" (click)="clear()"></i>
          </button>
          <button class="dlt-button dlt-button-primary" type="submit">
            <i class="dlt-icon-search dlt-icon-lg"></i>
          </button>
        </form>
      </div>
    </div>

  </form>
  <div style="width: auto; margin-left: 30px; margin-right: 30px">
    <div class="dlt-table-wrapper">
      <table mat-table class="dlt-data-table-container dlt-data-table density-medium" #package [dataSource]="data" style="width: 100%">
      <ng-container matColumnDef="auth">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let p" style="width: 40px">
          <fa-icon *ngIf="!p.sourceIsPrivate" [icon]="faKey" style="color: #eeeeee"></fa-icon>
          <fa-icon *ngIf="p.sourceIsPrivate" [icon]="faKey"></fa-icon>
        </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell class="dlt-table-header" *matHeaderCellDef style="font-weight: bold" >Package</th>
        <td mat-cell *matCellDef="let p"><a href="" (click)="showPackageDetails(p)" style="color: #1776BF">{{p.packageName}}</a></td>
      </ng-container>

      <ng-container matColumnDef="category">
        <th mat-header-cell *matHeaderCellDef style="font-weight: bold">Category</th>
        <td mat-cell *matCellDef="let p" style="width: 80px"> {{p.category}} </td>
      </ng-container>

      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef style="font-weight: bold" >Description</th>
        <td mat-cell *matCellDef="let p"> {{truncate(p.description)}} </td>
      </ng-container>

      <ng-container matColumnDef="registered">
        <th mat-header-cell *matHeaderCellDef style="font-weight: bold"  >Registered</th>
        <td mat-cell *matCellDef="let p" style="width: 80px"> {{p.registeredDate}} </td>
      </ng-container>

      <ng-container matColumnDef="downloads">
        <th mat-header-cell *matHeaderCellDef style="font-weight: bold; text-align: center">Downloads</th>
        <td mat-cell *matCellDef="let p" style="width: 120px; text-align: center"> {{p.totalDownloads}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    </div>
  </div>
  <div style="margin-left: 30px; margin-right: 30px; margin-top: 30px">
    <div style="float: right; margin: 20px">
      <button *ngIf="isAdministrator()" mat-button color="primary" (click)="addPackage()">
        <fa-icon [icon]="faPlusSquare"></fa-icon> Add package
      </button>
    </div>
  </div>
  <div style="font-size: small; font-style: italic; color: gray; width: 50%; margin-top: 50px; margin-left: auto; margin-right: auto">
    TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE REGISTRY PROVIDER
    SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR
    PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED
    DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, THROUGH THE USE OF THESE SOFTWARES.
  </div>
</div>
