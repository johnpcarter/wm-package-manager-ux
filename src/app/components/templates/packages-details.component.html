<div style="display: flex; flex-direction: column; justify-content: space-between; width: 100%; height: 100%">
  <div>
    <div style="float: right"><fa-icon class="icon" [icon]="faTimes" size="1x" (click)="onNoClick()"></fa-icon></div>
    <h2>{{package.name}}</h2>
    <div style="display: flex; flex-direction: column">
      <h3 mat-subheader>{{package.description}}</h3>
      <div style="display: flex; flex-direction: row; justify-content: flex-start; padding: 20px; margin-top: 40px">
        <fa-icon matListIcon class="icon" [icon]="faObjectGroup" size="3x" style="width: 60px; height: 60px"></fa-icon>
        <p>
          <mat-chip-list>
            <mat-chip selected>{{package.category}}</mat-chip>
            <mat-chip *ngFor="let s of this.package.searchTags">{{s}}</mat-chip>
          </mat-chip-list>
        </p>
      </div>
      <h4 style="color: gray">Package Statistics</h4>
      <div style="display: flex; flex-direction: row; justify-content: flex-start; padding: 20px">
        <fa-icon matListIcon class="icon" [icon]="faUniversalAccess" size="3x" style="width: 60px; height: 60px;"></fa-icon>
        <div style="width: 100%">
          <p>
            {{authType()}}<span style="color: gray"> package registered by </span>{{package.owner}}
          </p>
          <div style="display: inline-flex; width: 100%; justify-content: flex-start">
            <div style="display: flex; flex-direction: column; width: 200px">
              <p style="color: lightgray; font-size: small"><fa-icon [icon]="faClock"></fa-icon> Registered</p>
              <p style="font-weight: bold">{{package.registeredDate}}</p>
            </div>
            <div style="display: flex; flex-direction: column; width: 200px; align-items: flex-start">
              <p style="color: lightgray; font-size: small"><fa-icon [icon]="faLongArrowAltDown"></fa-icon> Total downloads</p>
              <p style="background-color: darkgray; color: white; min-width: 30px; border-radius: 4px; text-align: center; font-weight: bold">{{count(package.totalDownloads)}}</p>
            </div>
            <div style="display: flex; flex-direction: column; width: 200px; align-items: flex-start">
              <p style="color: lightgray; font-size: small"><fa-icon [icon]="faLongArrowAltDown"></fa-icon> Recent</p>
              <p style="background-color: black; color: white; min-width: 30px; border-radius: 4px; text-align: center; font-weight: bold">{{count(package.recentDownloads)}}</p>
            </div>
          </div>
        </div>
      </div>
      <h4 style="color: gray">Repository</h4>
      <div style="display: flex; flex-direction: row; justify-content: flex-start; padding: 20px">
        <fa-icon matListIcon class="icon" [icon]="faGitAlt" size="3x" style="width: 60px; height: 60px"></fa-icon>
        <div style="width: 100%">
          <p><fa-icon *ngIf="package.sourceIsPrivate" [icon]="faKey" style="color: lightgray"></fa-icon> {{package.sourceUrl}} <a target="git" href="{{package.sourceUrl}}"><fa-icon [icon]="faGithub"></fa-icon></a></p>
          <div style="display: inline-flex; width: 100%; justify-content: flex-start">
            <div style="display: flex; flex-direction: column; width: 200px">
              <p style="color: lightgray; font-size: small"><fa-icon [icon]="faClock"></fa-icon> Last updated</p>
              <p style="font-weight: bold">{{package.lastUpdated}}</p>
            </div>
            <div style="display: flex; flex-direction: column; width: 200px; align-items: flex-start">
              <p style="color: lightgray; font-size: small"><fa-icon [icon]="faBinoculars"></fa-icon> watchers</p>
              <p style="background-color: green; min-width: 30px; border-radius: 4px; color: white; text-align: center"> {{package.watchers}} </p>
            </div>
            <div style="display: flex; flex-direction: column; width: 200px; align-items: flex-start">
              <p style="color: lightgray; font-size: small"><fa-icon [icon]="faStar"></fa-icon> star gazers</p>
              <p style="background-color: pink; min-width: 30px; border-radius: 4px; color: white; text-align: center"> {{package.stargazers}} </p>
            </div>
          </div>
        </div>
      </div>
      <h4 style="color: gray">Available versions</h4>
      <div style="display: flex; flex-direction: row; justify-content: flex-start; padding: 20px">
        <fa-icon matListIcon class="icon" [icon]="faTags" style="width: 60px; height: 60px; font-size: 32px; padding-left: 10px;"></fa-icon>
        <div style="width: 100%">
          <p>
            <mat-chip-list>
              <mat-chip *ngFor="let tag of this.package.trustedTags" (click)="showTagInfo(tag.tag, tag.when, tag.by, tag.signature)" [color]="colorForTag(tag)" selected>{{tag.tag}} <fa-icon matChipRemove matIcon class="icon" [icon]="faCheckCircle" size="sm" style="margin-right: -5px; margin-bottom: 5px"></fa-icon></mat-chip>
              <mat-chip *ngFor="let tag of this.package.availableTags" (click)="showTagInfo(tag)">{{tag}}</mat-chip>
            </mat-chip-list>
          </p>
        </div>
      </div>
      <h4 style="color: gray">Access</h4>
      <div style="display: flex; flex-direction: row; justify-content: flex-start; padding: 20px">
        <fa-icon matListIcon class="icon" [icon]="faUsers" style="width: 60px; height: 60px; font-size: 32px; padding-left: 10px;"></fa-icon>
        <div style="width: 100%">
          <div *ngIf="this.package.private; else alt" style="display: inline-flex; width: 100%; justify-content: flex-start">
            <mat-chip-list>
              <mat-chip *ngFor="let user of package.users" selectable="false" selected>{{user}} <fa-icon matChipRemove matIcon *ngIf="isAdministrator() && user !== 'everybody'" (click)="removeUser(user)" class="icon" [icon]="faMinusCircle" size="sm" style="margin-right: -5px; margin-bottom: 5px"></fa-icon></mat-chip>
              <p *ngIf="!package.users || package.users.length == 0" style="color: red; font-size: small; font-style: italic">Invisible package alert</p>
              <mat-chip *ngIf="isAdministrator()" selectable="false">Add user <fa-icon matChipRemove matIcon *ngIf="isAdministrator()" (click)="addUser()" class="icon" [icon]="faPlusCircle" size="sm" style="margin-right: -5px; margin-bottom: 5px"></fa-icon></mat-chip>
            </mat-chip-list>
          </div>
          <ng-template #alt>
            <p style="font-size: small; color: lightgray"><fa-icon [icon]="faLockOpen"></fa-icon> Registry is public</p>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
  <mat-card-actions style="flex-grow: 0">
    <button *ngIf="isAdministrator()" mat-raised-button color="accent" style=" margin-top: 5px" (click)="unregisterPackage()"> <fa-icon matListIcon class="icon" [icon]="faEraser" size="1x"></fa-icon> Remove</button>
  </mat-card-actions>
</div>
